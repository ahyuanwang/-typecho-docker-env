var Markdown="object"==typeof exports&&"function"==typeof require?exports:{};(function(){function b(f){return f}function c(f){return !1}function d(){}function a(){}d.prototype={chain:function(g,h){var f=this[g];if(!f){throw new Error("unknown hook "+g)}this[g]=f===b?h:function(j){var i=Array.prototype.slice.call(arguments,0);return i[0]=f.apply(null,i),h.apply(null,i)}},set:function(g,f){if(!this[g]){throw new Error("unknown hook "+g)}this[g]=f},addNoop:function(f){this[f]=b},addFalse:function(f){this[f]=c}},Markdown.HookCollection=d,a.prototype={set:function(g,f){this["s_"+g]=f},get:function(f){return this["s_"+f]}},Markdown.Converter=function(am){var ao,ag,aa,ae,ab=this.hooks=new d;ab.addNoop("plainLinkText"),ab.addNoop("preConversion"),ab.addNoop("postNormalization"),ab.addNoop("preBlockGamut"),ab.addNoop("postBlockGamut"),ab.addNoop("preSpanGamut"),ab.addNoop("postSpanGamut"),ab.addNoop("postConversion");var Z,aq,ad,ai,an,Y=b,al=b;(am=am||{}).nonAsciiLetters&&(Z=/[Q\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376-\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0523\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0621-\u064a\u0660-\u0669\u066e-\u066f\u0671-\u06d3\u06d5\u06e5-\u06e6\u06ee-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07c0-\u07ea\u07f4-\u07f5\u07fa\u0904-\u0939\u093d\u0950\u0958-\u0961\u0966-\u096f\u0971-\u0972\u097b-\u097f\u0985-\u098c\u098f-\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc-\u09dd\u09df-\u09e1\u09e6-\u09f1\u0a05-\u0a0a\u0a0f-\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32-\u0a33\u0a35-\u0a36\u0a38-\u0a39\u0a59-\u0a5c\u0a5e\u0a66-\u0a6f\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2-\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0-\u0ae1\u0ae6-\u0aef\u0b05-\u0b0c\u0b0f-\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32-\u0b33\u0b35-\u0b39\u0b3d\u0b5c-\u0b5d\u0b5f-\u0b61\u0b66-\u0b6f\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99-\u0b9a\u0b9c\u0b9e-\u0b9f\u0ba3-\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0be6-\u0bef\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58-\u0c59\u0c60-\u0c61\u0c66-\u0c6f\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0-\u0ce1\u0ce6-\u0cef\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d28\u0d2a-\u0d39\u0d3d\u0d60-\u0d61\u0d66-\u0d6f\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32-\u0e33\u0e40-\u0e46\u0e50-\u0e59\u0e81-\u0e82\u0e84\u0e87-\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa-\u0eab\u0ead-\u0eb0\u0eb2-\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0ed0-\u0ed9\u0edc-\u0edd\u0f00\u0f20-\u0f29\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8b\u1000-\u102a\u103f-\u1049\u1050-\u1055\u105a-\u105d\u1061\u1065-\u1066\u106e-\u1070\u1075-\u1081\u108e\u1090-\u1099\u10a0-\u10c5\u10d0-\u10fa\u10fc\u1100-\u1159\u115f-\u11a2\u11a8-\u11f9\u1200-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u1676\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u17e0-\u17e9\u1810-\u1819\u1820-\u1877\u1880-\u18a8\u18aa\u1900-\u191c\u1946-\u196d\u1970-\u1974\u1980-\u19a9\u19c1-\u19c7\u19d0-\u19d9\u1a00-\u1a16\u1b05-\u1b33\u1b45-\u1b4b\u1b50-\u1b59\u1b83-\u1ba0\u1bae-\u1bb9\u1c00-\u1c23\u1c40-\u1c49\u1c4d-\u1c7d\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u203f-\u2040\u2054\u2071\u207f\u2090-\u2094\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183-\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2c6f\u2c71-\u2c7d\u2c80-\u2ce4\u2d00-\u2d25\u2d30-\u2d65\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3006\u3031-\u3035\u303b-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31b7\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fc3\ua000-\ua48c\ua500-\ua60c\ua610-\ua62b\ua640-\ua65f\ua662-\ua66e\ua67f-\ua697\ua717-\ua71f\ua722-\ua788\ua78b-\ua78c\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8d0-\ua8d9\ua900-\ua925\ua930-\ua946\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa50-\uaa59\uac00-\ud7a3\uf900-\ufa2d\ufa30-\ufa6a\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe33-\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/g,aq="Q".charCodeAt(0),ad="A".charCodeAt(0),ai="Z".charCodeAt(0),an="a".charCodeAt(0)-ai-1,Y=function(f){return f.replace(Z,function(i){for(var g,k=i.charCodeAt(0),h="";0<k;){aq<=(g=k%51+ad)&&g++,ai<g&&(g+=an),h=String.fromCharCode(g)+h,k=k/51|0}return"Q"+h+"Q"})},al=function(f){return f.replace(/Q([A-PR-Za-z]{1,3})Q/g,function(k,h){for(var l,i=0,g=0;g<h.length;g++){l=h.charCodeAt(g),ai<l&&(l-=an),aq<l&&l--,i=51*i+(l-=ad)}return String.fromCharCode(i)})});var ac=am.asteriskIntraWordEmphasis?function(f){return -1===f.indexOf("*")&&-1===f.indexOf("_")?f:(f=(f=(f=Y(f)).replace(/(?=[^\r][*_]|[*_])(^|(?=\W__|(?!\*)[\W_]\*\*|\w\*\*\w)[^\r])(\*\*|__)(?!\2)(?=\S)((?:|[^\r]*?(?!\2)[^\r])(?=\S_|\w|\S\*\*(?:[\W_]|$)).)(?=__(?:\W|$)|\*\*(?:[^*]|$))\2/g,"$1<strong>$3</strong>")).replace(/(?=[^\r][*_]|[*_])(^|(?=\W_|(?!\*)(?:[\W_]\*|\D\*(?=\w)\D))[^\r])(\*|_)(?!\2\2\2)(?=\S)((?:(?!\2)[^\r])*?(?=[^\s_]_|(?=\w)\D\*\D|[^\s*]\*(?:[\W_]|$)).)(?=_(?:\W|$)|\*(?:[^*]|$))\2/g,"$1<em>$3</em>"),al(f))}:function(f){return -1===f.indexOf("*")&&-1===f.indexOf("_")?f:(f=(f=(f=Y(f)).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)\2(?=\S)([^\r]*?\S)\2\2(?!\2)(?=[\W_]|$)/g,"$1<strong>$3</strong>")).replace(/(^|[\W_])(?:(?!\1)|(?=^))(\*|_)(?=\S)((?:(?!\2)[^\r])*?\S)\2(?!\2)(?=[\W_]|$)/g,"$1<em>$3</em>"),al(f))};function ak(f){return f=(f=(f=(f=(f=f.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,af)).replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math)\b[^\r]*?.*<\/\2>[ \t]*(?=\n+)\n)/gm,af)).replace(/\n[ ]{0,3}((<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,af)).replace(/\n\n[ ]{0,3}(<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>[ \t]*(?=\n{2,}))/g,af)).replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,af)}function aj(f){return f=f.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(aa.push(f)-1)+"K\n\n"}function af(g,f){return aj(f)}this.makeHtml=function(f){if(ao){throw new Error("Recursive call to converter.makeHtml")}return ao=new a,ag=new a,aa=[],ae=0,f=(f=G(f="\n\n"+(f=(f=(f=(f=(f=ab.preConversion(f)).replace(/~/g,"~T")).replace(/\$/g,"~D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n"))+"\n\n")).replace(/^[ \t]+$/gm,""),f=ak(f=ab.postNormalization(f)),f=X(f=f.replace(/^[ ]{0,3}\[([^\[\]]+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?(?=\s|$)[ \t]*\n?[ \t]*((\n*)["(](.+?)[")][ \t]*)?(?:\n+)/gm,function(l,i,m,k,h,g){return i=i.toLowerCase(),ao.set(i,Q(m)),h?k:(g&&ag.set(i,g.replace(/"/g,"&quot;")),"")})),f=(f=(f=f.replace(/~E(\d+)E/g,function(h,g){g=parseInt(g);return String.fromCharCode(g)})).replace(/~D/g,"$$")).replace(/~T/g,"~"),f=ab.postConversion(f),aa=ag=ao=null,f};var ap=function(f){return X(f)};function X(g,f){g=ab.preBlockGamut(g,ap);var h="<hr />\n";return g=O(g=(g=(g=(g=g.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(k,i){return"<h1>"+W(i)+"</h1>\n\n"}).replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(k,i){return"<h2>"+W(i)+"</h2>\n\n"}).replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(k,i,l){i=i.length;return"<h"+i+">"+W(l)+"</h"+i+">\n\n"})).replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,h)).replace(/^[ ]{0,2}([ ]?-[ ]?){3,}[ \t]*$/gm,h)).replace(/^[ ]{0,2}([ ]?_[ ]?){3,}[ \t]*$/gm,h)),h=g,g=h=(h=(h+="~0").replace(/(?:\n\n|^\n?)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(k,i,l){return"\n\n"+(i="<pre><code>"+(i=(i=(i=G(i=M(J(i)))).replace(/^\n+/g,"")).replace(/\n+$/g,""))+"\n</code></pre>")+"\n\n"+l})).replace(/~0/,""),g=g.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(k,i){return aj("<blockquote>\n"+(i=(i=(i=X(i=(i=(i=i.replace(/^[ \t]*>[ \t]?/gm,"~0")).replace(/~0/g,"")).replace(/^[ \t]+$/gm,""))).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(m,l){return l=(l=l.replace(/^  /gm,"~0")).replace(/~0/g,"")}))+"\n</blockquote>")}),g=function(s,y){for(var m=(s=(s=s.replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),k=[],x=/~K(\d+)K/,w=m.length,l=0;l<w;l++){var p=m[l];x.test(p)?k.push(p):/\S/.test(p)&&(p=(p=W(p)).replace(/^([ \t]*)/g,"<p>"),p+="</p>",k.push(p))}if(!y){w=k.length;for(l=0;l<w;l++){for(var v=!0;v;){v=!1,k[l]=k[l].replace(/~K(\d+)K/g,function(n,i){return v=!0,aa[i]})}}}return k.join("\n\n")}(g=ak(g=ab.postBlockGamut(g,ap)),f)}function W(g){var f;return g=ab.preSpanGamut(g),g=g.replace(/(^|[^\\`])(`+)(?!`)([^\r]*?[^`])\2(?!`)/gm,function(l,i,m,k,h){return i+"<code>"+(k=(k=M(k=(k=k.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""))).replace(/:\/\//g,"~P"))+"</code>"}),g=g.replace(/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--(?:|(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>)/gi,function(h){return P(h.replace(/(.)<\/?code>(?=.)/g,"$1`"),"!"==h.charAt(1)?"\\`*_/":"\\`*_")}),g=g.replace(/\\(\\)/g,A).replace(/\\([`*_{}\[\]()>#+-.!])/g,A),g=-1===(f=g).indexOf("![")?f:f=(f=f.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,j)).replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,j),g=Q(g=(g=function(h){h=h.replace(D,ar);return h=h.replace(/<((https?|ftp):[^'">\s]+)>/gi,function(k,i){var l;return'<a href="'+z(i)+'">'+ab.plainLinkText(i)+"</a>"})}(g=-1===(f=g).indexOf("[")?f:f=(f=(f=f.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,ah)).replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?((?:\([^)]*\)|[^()\s])*?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,ah)).replace(/(\[([^\[\]]+)\])()()()()()/g,ah))).replace(/~P/g,"://")),g=(g=ac(g)).replace(/  +\n/g," <br>\n"),g=ab.postSpanGamut(g)}function ah(m,k,s,l,g,f,p,h){null==h&&(h="");s=s.replace(/:\/\//g,"~P"),l=l.toLowerCase();if(""==g){if(""==l&&(l=s.toLowerCase().replace(/ ?\n/g," ")),g="#"+l,null!=ao.get(l)){g=ao.get(l),null!=ag.get(l)&&(h=ag.get(l))}else{if(!(-1<k.search(/\(\s*\)$/m))){return k}g=""}}g='<a href="'+(g=z(g))+'"';return""!=h&&(g+=' title="'+(h=P(h=V(h),"*_"))+'"'),g+=">"+s+"</a>"}function V(f){return f.replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function j(m,k,s,l,g,f,p,h){l=l.toLowerCase(),h=h||"";if(""==g){if(""==l&&(l=s.toLowerCase().replace(/ ?\n/g," ")),g="#"+l,null==ao.get(l)){return k}g=ao.get(l),null!=ag.get(l)&&(h=ag.get(l))}s=P(V(s),"*_[]()");s='<img src="'+(g=P(g,"*_"))+'" alt="'+s+'"';return s+=' title="'+(h=P(h=V(h),"*_"))+'"',s+=" />"}function O(h,f){h+="~0";var g=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return h=(h=ae?h.replace(g,function(m,k,o){var l,i=k,k=-1<o.search(/[*+-]/g)?"ul":"ol";"ol"==k&&(l=parseInt(o,10));o=U(i,k,f),i="<"+k;return l&&1!==l&&(i+=' start="'+l+'"'),o=i+">"+(o=o.replace(/\s+$/,""))+"</"+k+">\n"}):(g=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,h.replace(g,function(o,l,p,m){var k,i=l,l=p,p=-1<m.search(/[*+-]/g)?"ul":"ol";"ol"==p&&(k=parseInt(m,10));m=U(l,p),l="<"+p;return k&&1!==k&&(l+=' start="'+k+'"'),m=i+l+">\n"+m+"</"+p+">\n"}))).replace(/~0/,"")}var q={ol:"\\d+[.]",ul:"[*+-]"};function U(i,h,g){ae++,i=i.replace(/\n{2,}$/,"\n"),i+="~0";var h=q[h],h=new RegExp("(^[ \\t]*)("+h+")[ \\t]+([^\\r]+?(\\n+))(?=(~0|\\1("+h+")[ \\t]+))","gm"),f=!1;return i=(i=i.replace(h,function(m,k,o,l){k=/\n\n$/.test(l);return k||-1<l.search(/\n{2,}/)||f?l=X(J(l),!0):(l=(l=O(J(l),!0)).replace(/\n$/,""),g||(l=W(l))),f=k,"<li>"+l+"</li>\n"})).replace(/~0/g,""),ae--,i}function M(f){return f=P(f=(f=(f=f.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),"*_{}[]\\",!1)}function Q(f){return f=(f=f.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?!]|~D)/gi,"&lt;")}var am="[-A-Z0-9+&@#/%=~_|[\\])]",D=new RegExp('(="|<)?\\b(https?|ftp)(://[-A-Z0-9+&@#/%?=~_|[\\]()!:,.;]*'+am+")(?=$|\\W)","gi"),K=new RegExp(am,"i");function ar(l,v,h,f){if(v){return l}if(")"!==f.charAt(f.length-1)){return"<"+h+f+">"}for(var s=f.match(/[()]/g),p=0,g=0;g<s.length;g++){"("===s[g]?p<=0?p=1:p++:p--}var k,m="";return p<0&&(k=new RegExp("\\){1,"+-p+"}$"),f=f.replace(k,function(i){return m=i,""})),m&&(k=f.charAt(f.length-1),K.test(k)||(m=k+m,f=f.substr(0,f.length-1))),"<"+h+f+">"+m}function J(f){return f=(f=f.replace(/^(\t|[ ]{1,4})/gm,"~0")).replace(/~0/g,"")}function G(h){if(!/\t/.test(h)){return h}var i,g=["    ","   ","  "," "],f=0;return h.replace(/[\n\t]/g,function(l,k){return"\n"===l?(f=k+1,l):(i=(k-f)%4,f=k+1,g[i])})}function z(f){return f=P(f=V(f),"*_:()[]")}function P(g,f,h){f="(["+f.replace(/([\[\]\\])/g,"\\$1")+"])";h&&(f="\\\\"+f);f=new RegExp(f,"g");return g=g.replace(f,A)}function A(g,f){return"~E"+f.charCodeAt(0)+"E"}}})(),function(){var J={},B={},o={},l=window.document,I=window.RegExp,D=window.navigator,G=72,j={isIE:/msie/.test(D.userAgent.toLowerCase()),isIE_5or6:/msie 6/.test(D.userAgent.toLowerCase())||/msie 5/.test(D.userAgent.toLowerCase()),isOpera:/opera/.test(D.userAgent.toLowerCase())},A={bold:"Strong <strong> Ctrl+B",boldexample:"strong text",italic:"Emphasis <em> Ctrl+I",italicexample:"emphasized text",link:"Hyperlink <a> Ctrl+L",linkdescription:"enter link description here",linkdialog:'<p><b>Insert Hyperlink</b></p><p>http://example.com/ "optional title"</p>',linkname:null,quote:"Blockquote <blockquote> Ctrl+Q",quoteexample:"Blockquote",code:"Code Sample <pre><code> Ctrl+K",codeexample:"enter code here",image:"Image <img> Ctrl+G",imagedescription:"enter image description here",imagedialog:"<p><b>Insert Image</b></p><p>http://example.com/images/diagram.jpg \"optional title\"<br>Need <a href='http://www.google.com/search?q=free+image+hosting' target='_blank'>free image hosting?</a></p>",imagename:null,olist:"Numbered List <ol> Ctrl+O",ulist:"Bulleted List <ul> Ctrl+U",litem:"List item",heading:"Heading <h1>/<h2> Ctrl+H",headingexample:"Heading",more:"More contents \x3c!--more--\x3e Ctrl+M",fullscreen:"FullScreen Ctrl+J",exitFullscreen:"Exit FullScreen Ctrl+E",fullscreenUnsupport:"Sorry, the browser dont support fullscreen api",hr:"Horizontal Rule <hr> Ctrl+R",undo:"Undo - Ctrl+Z",redo:"Redo - Ctrl+Y",redomac:"Redo - Ctrl+Shift+Z",ok:"OK",cancel:"Cancel",help:"Markdown Editing Help"};function r(){}function z(b){this.buttonBar=l.getElementById("wmd-button-bar"+b),this.preview=l.getElementById("wmd-preview"+b),this.input=l.getElementById("text")}function F(M,k){function b(f,d){N!=f&&(N=f,d||w()),j.isIE&&"moving"==N?h=null:K=setTimeout(y,1)}var L,K,h,v=this,C=[],m=0,N="none",y=function(d){h=new a(k,d),K=void 0};this.setCommandMode=function(){N="command",w(),K=setTimeout(y,0)},this.canUndo=function(){return 1<m},this.canRedo=function(){return !!C[m+1]},this.undo=function(){v.canUndo()&&(L?(L.restore(),L=null):(C[m]=new a(k),C[--m].restore(),M&&M())),N="none",k.input.focus(),y()},this.redo=function(){v.canRedo()&&(C[++m].restore(),M&&M()),N="none",k.input.focus(),y()};function x(f){var d=!1;if((f.ctrlKey||f.metaKey)&&!f.altKey){var g=f.charCode||f.keyCode;switch(String.fromCharCode(g).toLowerCase()){case"y":v.redo(),d=!0;break;case"z":f.shiftKey?v.redo():v.undo(),d=!0}}d&&(f.preventDefault&&f.preventDefault(),window.event&&(window.event.returnValue=!1))}function e(d){d.ctrlKey||d.metaKey||(33<=(d=d.keyCode)&&d<=40||63232<=d&&d<=63235?b("moving"):8==d||46==d||127==d?b("deleting"):13==d?b("newlines"):27==d?b("escape"):(d<16||20<d)&&91!=d&&b("typing"))}var w=function(){var d=h||new a(k);if(!d){return !1}"moving"!=N?(L&&(C[m-1].text!=L.text&&(C[m++]=L),L=null),C[m++]=d,C[m+1]=null,M&&M()):L=L||d};!function(){J.addEvent(k.input,"keypress",function(f){!f.ctrlKey&&!f.metaKey||f.altKey||89!=f.keyCode&&90!=f.keyCode||f.preventDefault()});function d(){(j.isIE||h&&h.text!=k.input.value)&&null==K&&(N="paste",w(),y())}J.addEvent(k.input,"keydown",x),J.addEvent(k.input,"keydown",e),J.addEvent(k.input,"mousedown",function(){b("moving")}),k.input.onpaste=d,k.input.ondrop=d}(),y(!0),w()}function a(b,f){var g=this,d=b.input;this.init=function(){J.isVisible(d)&&(!f&&l.activeElement&&l.activeElement!==d||(this.setInputAreaSelectionStartEnd(),this.scrollTop=d.scrollTop,(!this.text&&d.selectionStart||0===d.selectionStart)&&(this.text=d.value)))},this.setInputAreaSelection=function(){var h;J.isVisible(d)&&(void 0===d.selectionStart||j.isOpera?l.selection&&(l.activeElement&&l.activeElement!==d||(d.focus(),(h=d.createTextRange()).moveStart("character",-d.value.length),h.moveEnd("character",-d.value.length),h.moveEnd("character",g.end),h.moveStart("character",g.start),h.select())):(d.focus(),d.selectionStart=g.start,d.selectionEnd=g.end,d.scrollTop=g.scrollTop))},this.setInputAreaSelectionStartEnd=function(){if(b.ieCachedRange||!d.selectionStart&&0!==d.selectionStart){if(l.selection){g.text=J.fixEolChars(d.value);var p=b.ieCachedRange||l.selection.createRange(),k=J.fixEolChars(p.text),v=""+k+"";p.text=v;var m=J.fixEolChars(d.value);p.moveStart("character",-v.length),p.text=k,g.start=m.indexOf(""),g.end=m.lastIndexOf("")-"".length;var h=g.text.length-J.fixEolChars(d.value).length;if(h){for(p.moveStart("character",-k.length);h--;){k+="\n",g.end+=1}p.text=k}b.ieCachedRange&&(g.scrollTop=b.ieCachedScrollTop),b.ieCachedRange=null,this.setInputAreaSelection()}}else{g.start=d.selectionStart,g.end=d.selectionEnd}},this.restore=function(){null!=g.text&&g.text!=d.value&&(d.value=g.text),this.setInputAreaSelection(),d.scrollTop=g.scrollTop},this.getChunks=function(){var h=new r;return h.before=J.fixEolChars(g.text.substring(0,g.start)),h.startTag="",h.selection=J.fixEolChars(g.text.substring(g.start,g.end)),h.endTag="",h.after=J.fixEolChars(g.text.substring(g.end)),h.scrollTop=g.scrollTop,h},this.setChunks=function(h){h.before=h.before+h.startTag,h.after=h.endTag+h.after,this.start=h.before.length,this.end=h.before.length+h.selection.length,this.text=h.before+h.selection+h.after,this.scrollTop=h.scrollTop},this.init()}function E(b,P,O){function m(){var d=0;return window.innerHeight?d=window.pageYOffset:l.documentElement&&l.documentElement.scrollTop?d=l.documentElement.scrollTop:l.body&&(d=l.body.scrollTop),d}function Q(){var f,d,g;P.preview&&((d=P.input.value)&&d==w||(w=d,f=(new Date).getTime(),d=b.makeHtml(d),g=(new Date).getTime(),N=g-f,y(d)))}function v(){x&&(clearTimeout(x),x=void 0);var d=0;3000<(d=N)&&(d=3000),x=setTimeout(Q,d)}var x,N,w;this.refresh=function(d){d?(w="",Q()):v()},this.processingTime=function(){return N};function R(g){var d=P.preview,h=d.parentNode,f=d.nextSibling;h.removeChild(d),d.innerHTML=g,f?h.insertBefore(d,f):h.appendChild(d)}function M(d){P.preview.innerHTML=d}var K,L,k,C=!0,y=function(f){var d,g=B.getTop(P.input)-m();P.preview&&(function(h){if(K){return K(h)}try{M(h),K=M}catch(n){(K=R)(h)}}(f),O()),P.preview&&(P.preview.scrollTop=(P.preview.scrollHeight-P.preview.clientHeight)*((f=P.preview).scrollHeight<=f.clientHeight?1:f.scrollTop/(f.scrollHeight-f.clientHeight))),C?C=!1:(d=B.getTop(P.input)-m(),j.isIE?setTimeout(function(){window.scrollBy(0,d-g)},0):window.scrollBy(0,d-g))};L=P.input,k=v,J.addEvent(L,"input",k),L.onpaste=k,L.ondrop=k,J.addEvent(L,"keypress",k),J.addEvent(L,"keydown",k),Q(),P.preview&&(P.preview.scrollTop=0)}function s(O,Q,b,P,t,v,x,R,N){var y=Q.input,L={};!function(){var g=Q.buttonBar,h=document.createElement("ul");h.id="wmd-button-row"+O,h.className="wmd-button-row",h=g.appendChild(h);var f=0,d=function(V,T,W,U){var S=document.createElement("li");S.className="wmd-button",S.style.left=f+"px",f+=25;var p=document.createElement("span");return S.id=V+O,S.appendChild(p),S.title=T,S.XShift=W,U&&(S.textOp=U),K(S,!0),h.appendChild(S),S},m=function(p){var n=document.createElement("li");n.className="wmd-spacer wmd-spacer"+p,n.id="wmd-spacer"+p+O,h.appendChild(n),f+=25};L.bold=d("wmd-bold-button",N("bold"),"0px",C("doBold")),L.italic=d("wmd-italic-button",N("italic"),"-20px",C("doItalic")),m(1),L.link=d("wmd-link-button",N("link"),"-40px",C(function(p,n){return this.doLinkOrImage(p,n,!1)})),L.quote=d("wmd-quote-button",N("quote"),"-60px",C("doBlockquote")),L.code=d("wmd-code-button",N("code"),"-80px",C("doCode")),L.image=d("wmd-image-button",N("image"),"-100px",C(function(p,n){return this.doLinkOrImage(p,n,!0)})),m(2),L.olist=d("wmd-olist-button",N("olist"),"-120px",C(function(p,n){this.doList(p,n,!0)})),L.ulist=d("wmd-ulist-button",N("ulist"),"-140px",C(function(p,n){this.doList(p,n,!1)})),L.heading=d("wmd-heading-button",N("heading"),"-160px",C("doHeading")),L.hr=d("wmd-hr-button",N("hr"),"-180px",C("doHorizontalRule")),L.more=d("wmd-more-button",N("more"),"-280px",C("doMore")),m(3),L.undo=d("wmd-undo-button",N("undo"),"-200px",null),L.undo.execute=function(n){n&&n.undo()};g=/win/.test(D.platform.toLowerCase())?N("redo"):N("redomac");L.redo=d("wmd-redo-button",g,"-220px",null),L.redo.execute=function(n){n&&n.redo()},m(4),L.fullscreen=d("wmd-fullscreen-button",N("fullscreen"),"-240px",null),L.fullscreen.execute=function(){x.doFullScreen(L,!0)},L.exitFullscreen=d("wmd-exit-fullscreen-button",N("exitFullscreen"),"-260px",null),L.exitFullscreen.style.display="none",L.exitFullscreen.execute=function(){x.doFullScreen(L,!1)},b.makeButton(L,d,C,o),R&&(m=document.createElement("li"),d=document.createElement("span"),m.appendChild(d),m.className="wmd-button wmd-help-button",m.id="wmd-help-button"+O,m.XShift="-300px",m.isHelp=!0,m.style.right="0px",m.title=N("help"),m.onclick=R.handler,K(m,!0),h.appendChild(m),L.help=m);w()}();var M="keydown";function k(g){if(y.focus(),g.textOp){P&&P.setCommandMode();var d=new a(Q);if(!d){return}function h(){y.focus(),f&&d.setChunks(f),d.restore(),t.refresh()}var f=d.getChunks();g.textOp(f,h)||h()}g.execute&&g.execute(P)}function K(f,d){d?(j.isIE&&(f.onmousedown=function(){l.activeElement&&l.activeElement!==Q.input||(Q.ieCachedRange=document.selection.createRange(),Q.ieCachedScrollTop=Q.input.scrollTop)}),f.isHelp||(f.onclick=function(){return this.onmouseout&&this.onmouseout(),k(this),!1})):f.onmouseover=f.onmouseout=f.onclick=function(){}}function C(f){var d;return"string"==typeof f&&(f=v[d=f]),function(){f.apply(v,arguments),d&&b.commandExecuted(d)}}function w(){P&&(K(L.undo,P.canUndo()),K(L.redo,P.canRedo()))}j.isOpera&&(M="keypress"),J.addEvent(y,M,function(f){if(!f.ctrlKey&&!f.metaKey||f.altKey||f.shiftKey){9==f.keyCode&&window.fullScreenEntered&&((d={}).textOp=C("doTab"),k(d),f.preventDefault&&f.preventDefault(),window.event&&(window.event.returnValue=!1))}else{var d=f.charCode||f.keyCode;switch(String.fromCharCode(d).toLowerCase()){case"b":k(L.bold);break;case"i":k(L.italic);break;case"l":k(L.link);break;case"q":k(L.quote);break;case"k":k(L.code);break;case"g":k(L.image);break;case"o":k(L.olist);break;case"u":k(L.ulist);break;case"m":k(L.more);break;case"j":k(L.fullscreen);break;case"e":k(L.exitFullscreen);break;case"h":k(L.heading);break;case"r":k(L.hr);break;case"y":k(L.redo);break;case"z":f.shiftKey?k(L.redo):k(L.undo);break;default:return}f.preventDefault&&f.preventDefault(),window.event&&(window.event.returnValue=!1)}}),J.addEvent(y,"keyup",function(d){!d.shiftKey||d.ctrlKey||d.metaKey||13===(d.charCode||d.keyCode)&&((d={}).textOp=C("doAutoindent"),k(d))}),j.isIE&&J.addEvent(y,"keydown",function(d){if(27===d.keyCode){return !1}}),this.setUndoRedoButtonStates=w}function c(d,b){this.hooks=d,this.getString=b}Markdown.Editor=function(e,d,h){"function"==typeof(h=h||{}).handler&&(h={helpButton:h}),h.strings=h.strings||{},h.helpButton&&(h.strings.help=h.strings.help||h.helpButton.title);function f(n){var m=h.strings[n]||A[n];return"imagename"!=n&&"linkname"!=n||(h.strings[n]=null),m}d=d||"";var k=this.hooks=new Markdown.HookCollection;k.addNoop("onPreviewRefresh"),k.addNoop("postBlockquoteCreation"),k.addFalse("insertImageDialog"),k.addFalse("insertLinkDialog"),k.addNoop("makeButton"),k.addNoop("commandExecuted"),k.addNoop("enterFullScreen"),k.addNoop("enterFakeFullScreen"),k.addNoop("exitFullScreen"),this.getConverter=function(){return e};var b,g=this;this.run=function(){var u,m,v,p;b||(b=new z(d),u=new c(k,f),m=new E(e,b,function(){k.onPreviewRefresh()}),/\?noundo/.test(l.location.href)||(v=new F(function(){m.refresh(),p&&p.setUndoRedoButtonStates()},b),this.textOperation=function(n){v.setCommandMode(),n(),g.refreshPreview()}),fullScreenManager=new i(k,f),(p=new s(d,b,k,v,m,u,fullScreenManager,h.helpButton,f)).setUndoRedoButtonStates(),(g.refreshPreview=function(){m.refresh(!0)})())}},r.prototype.findTags=function(f,b){var g,d=this;f&&(g=J.extendRegExp(f,"","$"),this.before=this.before.replace(g,function(h){return d.startTag=d.startTag+h,""}),g=J.extendRegExp(f,"^",""),this.selection=this.selection.replace(g,function(h){return d.startTag=d.startTag+h,""})),b&&(g=J.extendRegExp(b,"","$"),this.selection=this.selection.replace(g,function(h){return d.endTag=h+d.endTag,""}),g=J.extendRegExp(b,"^",""),this.after=this.after.replace(g,function(h){return d.endTag=h+d.endTag,""}))},r.prototype.trimWhitespace=function(f){var b,g,d=this;f?b=g="":(b=function(h){return d.before+=h,""},g=function(h){return d.after=h+d.after,""}),this.selection=this.selection.replace(/^(\s*)/,b).replace(/(\s*)$/,g)},r.prototype.skipLines=function(g,d,h){var f,b;if(void 0===g&&(g=1),void 0===d&&(d=1),g++,d++,navigator.userAgent.match(/Chrome/)&&"X".match(/()./),this.selection=this.selection.replace(/(^\n*)/,""),this.startTag=this.startTag+I.$1,this.selection=this.selection.replace(/(\n*$)/,""),this.endTag=this.endTag+I.$1,this.startTag=this.startTag.replace(/(^\n*)/,""),this.before=this.before+I.$1,this.endTag=this.endTag.replace(/(\n*$)/,""),this.after=this.after+I.$1,this.before){for(f=b="";g--;){f+="\\n?",b+="\n"}h&&(f="\\n*"),this.before=this.before.replace(new I(f+"$",""),b)}if(this.after){for(f=b="";d--;){f+="\\n?",b+="\n"}h&&(f="\\n*"),this.after=this.after.replace(new I(f,""),b)}},J.isVisible=function(b){return window.getComputedStyle?"none"!==window.getComputedStyle(b,null).getPropertyValue("display"):b.currentStyle?"none"!==b.currentStyle.display:void 0},J.addEvent=function(d,b,f){d.attachEvent?d.attachEvent("on"+b,f):d.addEventListener(b,f,!1)},J.removeEvent=function(d,b,f){d.detachEvent?d.detachEvent("on"+b,f):d.removeEventListener(b,f,!1)},J.fixEolChars=function(b){return b=(b=b.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")},J.extendRegExp=function(f,b,g){null==b&&(b=""),null==g&&(g="");var d,f=f.toString();return f=(f=f.replace(/\/([gim]*)$/,function(k,h){return d=h,""})).replace(/(^\/|\/$)/g,""),new I(f=b+f+g,d)},B.getTop=function(d,b){var f=d.offsetTop;if(!b){for(;d=d.offsetParent;){f+=d.offsetTop}}return f},B.getHeight=function(b){return b.offsetHeight||b.scrollHeight},B.getWidth=function(b){return b.offsetWidth||b.scrollWidth},B.getPageSize=function(){var f,b,g,d=self.innerHeight&&self.scrollMaxY?(f=l.body.scrollWidth,self.innerHeight+self.scrollMaxY):l.body.scrollHeight>l.body.offsetHeight?(f=l.body.scrollWidth,l.body.scrollHeight):(f=l.body.offsetWidth,l.body.offsetHeight);return self.innerHeight?(b=self.innerWidth,g=self.innerHeight):l.documentElement&&l.documentElement.clientHeight?(b=l.documentElement.clientWidth,g=l.documentElement.clientHeight):l.body&&(b=l.body.clientWidth,g=l.body.clientHeight),[Math.max(f,b),Math.max(d,g),b,g]},o.createBackground=function(){var d=l.createElement("div"),b=d.style;d.className="wmd-prompt-background",b.position="absolute",b.top="0",b.zIndex="1000",j.isIE?b.filter="alpha(opacity=50)":b.opacity="0.5";var f=B.getPageSize();return b.height=f[1]+"px",j.isIE?(b.left=l.documentElement.scrollLeft,b.width=l.documentElement.clientWidth):(b.left="0",b.width="100%"),l.body.appendChild(d),d},o.dialog=function(g,f,d,b){function h(m){27===(m.charCode||m.keyCode)&&k(!0)}var e,k=function(m){return J.removeEvent(l.body,"keydown",h),e.parentNode.removeChild(e),f(m),!1};setTimeout(function(){!function(){(e=l.createElement("div")).className="wmd-prompt-dialog",e.setAttribute("role","dialog");var p=l.createElement("div"),m=l.createElement("form");m.style;m.onsubmit=function(){return k(!1)},e.appendChild(m),m.appendChild(p),"function"==typeof g?g.call(this,p):p.innerHTML=g;var u=l.createElement("button");u.type="button",u.className="btn btn-s primary",u.onclick=function(){return k(!1)},u.innerHTML=d;p=l.createElement("button");p.type="button",p.className="btn btn-s",p.onclick=function(){return k(!0)},p.innerHTML=b,m.appendChild(u),m.appendChild(p),J.addEvent(l.body,"keydown",h),l.body.appendChild(e)}()},0)},o.prompt=function(b,m,e,k,d){var g,h;void 0===m&&(m="");function f(n){27===(n.charCode||n.keyCode)&&p(!0)}var p=function(u){J.removeEvent(l.body,"keydown",f);var n=h.value;return u?n=null:(n=n.replace(/^http:\/\/(https?|ftp):\/\//,"$1://"),/^(?:https?|ftp):\/\//.test(n)||/^[_a-z0-9-]+:/i.test(n)||(n="http://"+n)),g.parentNode.removeChild(g),e(n),!1};setTimeout(function(){!function(){(g=l.createElement("div")).className="wmd-prompt-dialog",g.setAttribute("role","dialog");var w=l.createElement("div");w.innerHTML=b,g.appendChild(w);var v=l.createElement("form");v.style;v.onsubmit=function(){return p(!1)},g.appendChild(v),(h=l.createElement("input")).type="text",h.value=m,v.appendChild(h);var x=l.createElement("button");x.type="button",x.className="btn btn-s primary",x.onclick=function(){return p(!1)},x.innerHTML=k;w=l.createElement("button");w.type="button",w.className="btn btn-s",w.onclick=function(){return p(!0)},w.innerHTML=d,v.appendChild(x),v.appendChild(w),J.addEvent(l.body,"keydown",f),l.body.appendChild(g)}();var u,n=m.length;void 0!==h.selectionStart?(h.selectionStart=0,h.selectionEnd=n):h.createTextRange&&((u=h.createTextRange()).collapse(!1),u.moveStart("character",-n),u.moveEnd("character",n),u.select()),h.focus()},0)};var H=c.prototype;function i(d,b){this.fullScreenBind=!1,this.hooks=d,this.getString=b,this.isFakeFullScreen=!1}function q(){return document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msIsFullScreen}H.prefixes="(?:\\s{4,}|\\s*>|\\s*-\\s+|\\s*\\d+\\.|=|\\+|-|_|\\*|#|\\s*\\[[^\n]]+\\]:)",H.unwrap=function(d){var b=new I("([^\\n])\\n(?!(\\n|"+this.prefixes+"))","g");d.selection=d.selection.replace(b,"$1 $2")},H.wrap=function(d,b){this.unwrap(d);var b=new I("(.{1,"+b+"})( +|$\\n?)","gm"),f=this;d.selection=d.selection.replace(b,function(h,g){return new I("^"+f.prefixes,"").test(h)?h:g+"\n"}),d.selection=d.selection.replace(/\s+$/,"")},H.doBold=function(d,b){return this.doBorI(d,b,2,this.getString("boldexample"))},H.doItalic=function(d,b){return this.doBorI(d,b,1,this.getString("italicexample"))},H.doBorI=function(h,f,k,g){h.trimWhitespace(),h.selection=h.selection.replace(/\n{2,}/g,"\n");var d=/(\**$)/.exec(h.before)[0],b=/(^\**)/.exec(h.after)[0],d=Math.min(d.length,b.length);k<=d&&(2!=d||1!=k)?(h.before=h.before.replace(I("[*]{"+k+"}$",""),""),h.after=h.after.replace(I("^[*]{"+k+"}",""),"")):!h.selection&&b?(h.after=h.after.replace(/^([*_]*)/,""),h.before=h.before.replace(/(\s?)$/,""),d=I.$1,h.before=h.before+b+d):(h.selection||b||(h.selection=g),k=k<=1?"*":"**",h.before=h.before+k,h.after=k+h.after)},H.stripLinkDefs=function(d,b){return d=d.replace(/^[ ]{0,3}\[(\d+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|$)/gm,function(k,g,m,h,f){return b[g]=k.replace(/\s*$/,""),h?(b[g]=k.replace(/["(](.+?)[")]$/,""),h+f):""})},H.addLinkDef=function(h,f){var k=0,d={};h.before=this.stripLinkDefs(h.before,d),h.selection=this.stripLinkDefs(h.selection,d),h.after=this.stripLinkDefs(h.after,d);function p(n){k++,n=n.replace(/^[ ]{0,3}\[(\d+)\]:/,"  ["+k+"]:"),m+="\n"+n}var m="",b=/(\[)((?:\[[^\]]*\]|[^\[\]])*)(\][ ]?(?:\n[ ]*)?\[)(\d+)(\])/g,g=function(C,x,K,y,w,v){return K=K.replace(b,g),d[w]?(p(d[w]),x+K+y+k+v):C};h.before=h.before.replace(b,g),f?p(f):h.selection=h.selection.replace(b,g);f=k;return h.after=h.after.replace(b,g),h.after&&(h.after=h.after.replace(/\n*$/,"")),h.after||(h.selection=h.selection.replace(/\n*$/,"")),h.after+="\n\n"+m,f},H.doLinkOrImage=function(k,f,d){if(k.trimWhitespace(),k.findTags(/\s*!?\[/,/\][ ]?(?:\n[ ]*)?(\[.*?\])?/),1<k.endTag.length&&0<k.startTag.length){k.startTag=k.startTag.replace(/!?\[/,""),k.endTag="",this.addLinkDef(k,null)}else{if(k.selection=k.startTag+k.selection+k.endTag,k.startTag=k.endTag="",!/\n\n/.test(k.selection)){function g(n){var m;h.parentNode.removeChild(h),null!==n&&(k.selection=(" "+k.selection).replace(/([^\\](?:\\\\)*)(?=[[\]])/g,"$1\\").substr(1),n=" [999]: "+n.replace(/^\s*(.*?)(?:\s+"(.+)")?\s*$/,function(v,p,w){var u=!1;return p=p.replace(/%(?:[\da-fA-F]{2})|\?|\+|[^\w\d-./[\]]/g,function(t){if(3===t.length&&"%"==t.charAt(0)){return t.toUpperCase()}switch(t){case"?":return u=!0,"?";case"+":if(u){return"%20"}}return encodeURI(t)}),(w=w&&(w=w.trim?w.trim():w.replace(/^\s*/,"").replace(/\s*$/,"")).replace(/"/g,"quot;").replace(/\(/g,"&#40;").replace(/\)/g,"&#41;").replace(/</g,"&lt;").replace(/>/g,"&gt;"))?p+' "'+w+'"':p}),n=b.addLinkDef(k,n),k.startTag=d?"![":"[",k.endTag="]["+n+"]",k.selection||(d?(m=b.getString("imagename"),k.selection=m||b.getString("imagedescription")):(m=b.getString("linkname"),k.selection=m||b.getString("linkdescription")))),f(),b.hooks.commandExecuted(d?"doImage":"doLink")}var b=this,h=o.createBackground();return d?this.hooks.insertImageDialog(g)||o.prompt(this.getString("imagedialog"),"http://",g,this.getString("ok"),this.getString("cancel")):this.hooks.insertLinkDialog(g)||o.prompt(this.getString("linkdialog"),"http://",g,this.getString("ok"),this.getString("cancel")),!0}this.addLinkDef(k,null)}},H.doAutoindent=function(b,f){var g=this,d=!1;b.before=b.before.replace(/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]*\n$/,"\n\n"),b.before=b.before.replace(/(\n|^)[ ]{0,3}>[ \t]*\n$/,"\n\n"),b.before=b.before.replace(/(\n|^)[ \t]+\n$/,"\n\n"),b.selection||/^[ \t]*(?:\n|$)/.test(b.after)||(b.after=b.after.replace(/^[^\n]*/,function(h){return b.selection=h,""}),d=!0),/(\n|^)[ ]{0,3}([*+-]|\d+[.])[ \t]+.*\n$/.test(b.before)&&g.doList&&g.doList(b),/(\n|^)[ ]{0,3}>[ \t]+.*\n$/.test(b.before)&&g.doBlockquote&&g.doBlockquote(b),/(\n|^)(\t|[ ]{4,}).*\n$/.test(b.before)&&g.doCode&&g.doCode(b),d&&(b.after=b.selection+b.after,b.selection="")},H.doBlockquote=function(v,k){v.selection=v.selection.replace(/^(\n*)([^\r]+?)(\n*)$/,function(y,u,C,x){return v.before+=u,v.after=x+v.after,C}),v.before=v.before.replace(/(>[ \t]*)$/,function(u,n){return v.selection=n+v.selection,""}),v.selection=v.selection.replace(/^(\s|>)+$/,""),v.selection=v.selection||this.getString("quoteexample");var w="",f="";if(v.before){for(var b=v.before.replace(/\n$/,"").split("\n"),p=!1,d=0;d<b.length;d++){var h=!1,m=b[d],p=p&&0<m.length;/^>/.test(m)?(h=!0,!p&&1<m.length&&(p=!0)):h=!!/^[ \t]*$/.test(m)||p,h?w+=m+"\n":(f+=w+m,w="\n")}/(^|\n)>/.test(w)||(f+=w,w="")}v.startTag=w,v.before=f,v.after&&(v.after=v.after.replace(/^\n?/,"\n")),v.after=v.after.replace(/^(((\n|^)(\n[ \t]*)*>(.+\n)*.*)+(\n[ \t]*)*)/,function(n){return v.endTag=n,""});function g(t){var u=t?"> ":"";v.startTag&&(v.startTag=v.startTag.replace(/\n((>|\s)*)\n$/,function(x,n){return"\n"+n.replace(/^[ ]{0,3}>?[ \t]*$/gm,u)+"\n"})),v.endTag&&(v.endTag=v.endTag.replace(/^\n((>|\s)*)\n/,function(x,n){return"\n"+n.replace(/^[ ]{0,3}>?[ \t]*$/gm,u)+"\n"}))}/^(?![ ]{0,3}>)/m.test(v.selection)?(this.wrap(v,G-2),v.selection=v.selection.replace(/^/gm,"> "),g(!0),v.skipLines()):(v.selection=v.selection.replace(/^[ ]{0,3}> ?/gm,""),this.unwrap(v),g(!1),!/^(\n|^)[ ]{0,3}>/.test(v.selection)&&v.startTag&&(v.startTag=v.startTag.replace(/\n{0,2}$/,"\n\n")),!/(\n|^)[ ]{0,3}>.*$/.test(v.selection)&&v.endTag&&(v.endTag=v.endTag.replace(/^\n{0,2}/,"\n\n"))),v.selection=this.hooks.postBlockquoteCreation(v.selection),/\n/.test(v.selection)||(v.selection=v.selection.replace(/^(> *)/,function(u,n){return v.startTag+=n,""}))},H.doCode=function(b,f){var g,d=/\S[ ]*$/.test(b.before);!/^[ ]*\S/.test(b.after)&&!d||/\n/.test(b.selection)?(b.before=b.before.replace(/[ ]{4}$/,function(h){return b.selection=h+b.selection,""}),d=g=1,/(\n|^)(\t|[ ]{4,}).*\n$/.test(b.before)&&(g=0),/^\n(\t|[ ]{4,})/.test(b.after)&&(d=0),b.skipLines(g,d),b.selection?/^[ ]{0,3}\S/m.test(b.selection)?/\n/.test(b.selection)?b.selection=b.selection.replace(/^/gm,"    "):b.before+="    ":b.selection=b.selection.replace(/^(?:[ ]{4}|[ ]{0,3}\t)/gm,""):(b.startTag="    ",b.selection=this.getString("codeexample"))):(b.trimWhitespace(),b.findTags(/`/,/`/),b.startTag||b.endTag?b.endTag&&!b.startTag?(b.before+=b.endTag,b.endTag=""):b.startTag=b.endTag="":(b.startTag=b.endTag="`",b.selection||(b.selection=this.getString("codeexample"))))},H.doList=function(k,w,f){function b(){var n;return f?(n=" "+h+". ",h++):n=" "+d+" ",n}function v(n){return void 0===f&&(f=/^\s*\d/.test(n)),n=n.replace(/^[ ]{0,3}([*+-]|\d+[.])\s/gm,function(t){return b()})}var p=/^\n*(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*/,d="-",h=1;if(k.findTags(/(\n|^)*[ ]{0,3}([*+-]|\d+[.])\s+/,null),!k.before||/\n$/.test(k.before)||/^\n/.test(k.startTag)||(k.before+=k.startTag,k.startTag=""),k.startTag){var m=/\d+[.]/.test(k.startTag);if(k.startTag="",k.selection=k.selection.replace(/\n[ ]{4}/g,"\n"),this.unwrap(k),k.skipLines(),m&&(k.after=k.after.replace(p,v)),f==m){return}}var g=1;k.before=k.before.replace(/(\n|^)(([ ]{0,3}([*+-]|\d+[.])[ \t]+.*)(\n.+|\n{2,}([*+-].*|\d+[.])[ \t]+.*|\n{2,}[ \t]+\S.*)*)\n*$/,function(n){return/^\s*([*+-])/.test(n)&&(d=I.$1),g=/[^\n]\n\n[^\n]/.test(n)?1:0,v(n)}),k.selection||(k.selection=this.getString("litem"));var m=b(),x=1;k.after=k.after.replace(p,function(n){return x=/[^\n]\n\n[^\n]/.test(n)?1:0,v(n)}),k.trimWhitespace(!0),k.skipLines(g,x,!0);m=(k.startTag=m).replace(/./g," ");this.wrap(k,G-m.length),k.selection=k.selection.replace(/\n/g,"\n"+m),this.hooks.commandExecuted("doList")},H.doHeading=function(g,d){if(g.selection=g.selection.replace(/\s+/g," "),g.selection=g.selection.replace(/(^\s+|\s+$)/g,""),!g.selection){return g.startTag="## ",g.selection=this.getString("headingexample"),void (g.endTag=" ##")}var h=0;g.findTags(/#+[ ]*/,/[ ]*#+/),/#+/.test(g.startTag)&&(h=I.lastMatch.length),g.startTag=g.endTag="",g.findTags(null,/\s?(-+|=+)/),/=+/.test(g.endTag)&&(h=1),/-+/.test(g.endTag)&&(h=2),g.startTag=g.endTag="",g.skipLines(1,1);h=0==h?2:h-1;if(0<h){var f=2<=h?"-":"=",b=g.selection.length;for(G<b&&(b=G),g.endTag="\n";b--;){g.endTag+=f}}},H.doHorizontalRule=function(d,b){d.startTag="----------\n",d.selection="",d.skipLines(2,1,!0)},H.doMore=function(d,b){d.startTag="\x3c!--more--\x3e\n\n",d.selection="",d.skipLines(2,0,!0)},H.doTab=function(d,b){d.startTag="    ",d.selection=""},i.prototype.doFullScreen=function(f,b){var g=function(){var v,m={fullScreenChange:["onfullscreenchange","onwebkitfullscreenchange","onmozfullscreenchange","onmsfullscreenchange"],requestFullscreen:["requestFullscreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullScreen"],cancelFullscreen:["cancelFullscreen","exitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msCancelFullScreen"]},x={};for(v in m){for(var p=m[v].length,k=!1,h=0;h<p;h++){var w=m[v][h];if(void 0!==document[w]||void 0!==document.body[w]){x[v]=w,k=!0;break}}if(!k){return !1}}return x}(),d=this;if(!g){return alert(d.getString("fullscreenUnsupport")),!1}this.fullScreenBind||(J.addEvent(document,g.fullScreenChange.substring(2),function(){q()?(f.fullscreen.style.display="none",f.exitFullscreen.style.display="",d.hooks.enterFullScreen()):(f.fullscreen.style.display="",f.exitFullscreen.style.display="none",d.hooks.exitFullScreen())}),this.fullScreenBind=!0),b?(d.isFakeFullScreen?(document.body[g.requestFullscreen]("webkitRequestFullScreen"==g.requestFullscreen?Element.ALLOW_KEYBOARD_INPUT:null),d.isFakeFullScreen=!1):q()||(f.exitFullscreen.style.display="",d.hooks.enterFakeFullScreen(),d.isFakeFullScreen=!0),window.fullScreenEntered=!0):(d.isFakeFullScreen?(f.exitFullscreen.style.display="none",d.hooks.exitFullScreen()):q()&&document[g.cancelFullscreen](),d.isFakeFullScreen=!1,window.fullScreenEntered=!1)}}();